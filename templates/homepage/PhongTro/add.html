{% extends 'homepage/base.html' %}
{% load param_replace %}
{% load static %}

{% block cssblock %}
<link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet" type="text/css">
<link href="{% static 'css/font-awesome.min.css' %}" rel="stylesheet" type="text/css">
<link href="{% static 'css/elegant-icons.css' %}" rel="stylesheet" type="text/css">
<link href="{% static 'css/jquery-ui.min.css' %}" rel="stylesheet" type="text/css">
<link href="{% static 'css/nice-select.css' %}" rel="stylesheet" type="text/css">
<link href="{% static 'css/owl.carousel.min.css' %}" rel="stylesheet" type="text/css">
<link href="{% static 'css/magnific-popup.css' %}" rel="stylesheet" type="text/css">
<link href="{% static 'css/richtext.min.css' %}" rel="stylesheet" type="text/css">
<link href="{% static 'css/image-uploader.min.css' %}" rel="stylesheet" type="text/css">
<link href="{% static 'css/slicknav.min.css' %}" rel="stylesheet" type="text/css">
<link href="{% static 'css/style.css' %}" rel="stylesheet" type="text/css">
{% endblock %}

{% block content %}
<div class="container">
    <form action="{% url 'PhongTro:add'%}" data-districts-url="{% url 'PhongTro:ajax_load_districts' %}" data-streets-url="{% url 'PhongTro:ajax_load_streets' %}" data-wards-url="{% url 'PhongTro:ajax_load_wards' %}" enctype="multipart/form-data"  id="phongtroForm" method="POST" novalidate>
<!--{% csrf_token %}-->
<!--            {{ f.as_p}}-->
<!--            <h3>My Google Maps Demo</h3>-->
<!--            &lt;!&ndash;The div element for the map &ndash;&gt;-->
<!--            <div id="map"></div>-->
<!--            <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBGhfiQMaLdAk4322oW5YdKHs97CHFeXvI&libraries=places&callback=initMap" async defer></script>-->
<!--            <p><input type="submit" value="ThÃªm"></p>-->

    {% csrf_token %}
    {% for hidden in postForm.hidden_fields %}
    {{ hidden }}
    {% endfor %}

    {{ postForm.as_p }}

    {{ formset.management_form }}
    {{ formset.as_p}}

    <input name="submit" type="submit" value="Submit"/>
</form>
</div>

{% endblock %}

{% block jsblock %}
<script src="{% static 'js/jquery-3.3.1.min.js' %}"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>
<script src="{% static 'js/jquery.magnific-popup.min.js' %}"></script>
<script src="{% static 'js/mixitup.min.js' %}"></script>
<script src="{% static 'js/jquery-ui.min.js' %}"></script>
<script src="{% static 'js/jquery.nice-select.min.js' %}"></script>
<script src="{% static 'js/jquery.slicknav.js' %}"></script>
<script src="{% static 'js/owl.carousel.min.js' %}"></script>
<script src="{% static 'js/jquery.richtext.min.js' %}"></script>
<script src="{% static 'js/image-uploader.min.js' %}"></script>
<script src="{% static 'js/main.js' %}"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script>
        $(document).ready(function(){
                $("#id_province").change(function () {

                  var url = $("#phongtroForm").attr("data-districts-url");
                  var tinhtpId = $(this).val();

                  $.ajax({
                    url: url,
                    data: {
                      'province': tinhtpId
                      },
                    success: function (data) {
                      $("#id_district").html(data);
                    }
                  });
                });

                $("#id_district").change(function () {

                  var url = $("#phongtroForm").attr("data-wards-url");
                  var huyenId = $(this).val();

                  $.ajax({
                    url: url,
                    data: {
                      'district': huyenId
                      },
                    success: function (data) {
                      $("#id_ward").html(data);
                    }
                  });
                });

                 $("#id_district").change(function () {

                  var url = $("#phongtroForm").attr("data-streets-url");
                  var huyenId = $(this).val();

                  $.ajax({
                    url: url,
                    data: {
                      'district': huyenId
                      },
                    success: function (data) {
                      $("#id_street").html(data);
                    }
                  });
                });
        });

</script>

{% endblock %}
